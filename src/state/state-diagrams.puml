@startuml state-diagrams
' ========================
' 域状态图集合
' ========================

' ========================
' 全局配置
' ========================
skinparam dpi 100
skinparam defaultFontName "PingFang SC"
skinparam packageTitleAlignment center
skinparam backgroundColor white
skinparam shadowing false
hide empty description

title 各上下文状态转换图

' ========================
' 用户状态图
' ========================
state "用户账号状态" as user_container {
    state "未验证 (Unverified)" as user_unverified
    state "待审核 (Pending Review)" as user_pending_review
    state "活跃 (Active)" as user_active
    state "锁定 (Locked)" as user_locked
    state "受限 (Restricted)" as user_restricted
    state "失活 (Inactive)" as user_inactive
    state "封禁 (Banned)" as user_banned
    state "注销 (Deleted)" as user_deleted
    
    [*] --> user_unverified
    user_unverified --> user_pending_review : 需人工审核资质
    user_unverified --> user_active : 邮箱/手机验证
    user_pending_review --> user_active : 审核通过
    user_pending_review --> user_unverified : 资质不符/需重新提交
    user_active --> user_locked : 异常登录/密码错误次数过多
    user_active --> user_restricted : 轻微违规/被举报
    user_locked --> user_active : 安全验证/管理员解锁
    user_restricted --> user_active : 限制期满/申诉成功
    user_restricted --> user_banned : 再次违规/申诉失败
    user_active --> user_inactive : 长期不活跃/用户请求
    user_inactive --> user_active : 用户重新登录
    user_active --> user_banned : 严重违规/管理员操作
    user_active --> user_deleted : 用户申请注销
    user_inactive --> user_deleted : 超过保留期限
    user_banned --> user_deleted : 申请数据删除
    user_deleted --> [*]
}

' ========================
' 项目状态图
' ========================
state "项目管理状态" as project_container {
    state "草案 (Draft)" as project_draft
    state "规划/审核 (Planning/Review)" as project_planning
    state "进行中 (In Progress)" as project_in_progress
    state "暂停 (Paused)" as project_paused
    state "已完成 (Completed)" as project_completed
    state "已终止 (Aborted)" as project_aborted
    state "已归档 (Archived)" as project_archived
    
    [*] --> project_draft
    project_draft --> project_planning : 项目细节确认/审核
    project_planning --> project_in_progress : 团队就绪/里程碑设定
    project_planning --> project_aborted : 审核未通过/放弃项目
    project_in_progress --> project_paused : 资源问题/计划调整
    project_in_progress --> project_aborted : 重大风险/资源不足
    project_paused --> project_in_progress : 问题解决
    project_paused --> project_aborted : 长期无法解决问题
    project_in_progress --> project_completed : 所有里程碑达成
    project_completed --> project_archived : 项目总结/资源归档
    project_aborted --> project_archived : 经验总结/资料归档
    project_archived --> [*]
    
    note right of project_in_progress
      <b>可见性规则</b>:
      只有处于"进行中"状态的项目才会公开可见，
      其他状态的项目仅对项目成员和管理员可见
    end note
}

' ========================
' 团队状态图
' ========================
state "团队生命周期状态" as team_container {
    state "组建中 (Forming)" as team_forming
    state "活跃 (Active)" as team_active
    state "冻结 (Frozen)" as team_frozen
    state "已解散 (Disbanded)" as team_disbanded
    
    [*] --> team_forming
    team_forming --> team_active : 成员≥3人
    team_active --> team_frozen : 项目终止/重大违规
    team_frozen --> team_active : 服务组解冻
    team_frozen --> team_disbanded : 存档期满(90天)
    team_disbanded --> [*]
}

' ========================
' 内容状态图
' ========================
state "文章状态" as article_container {
    state "草稿 (Draft)" as article_draft
    state "已发布 (Published)" as article_published
    state "已归档 (Archived)" as article_archived
    
    [*] --> article_draft
    article_draft --> article_published : 管理员发布
    article_published --> article_draft : 暂时下线
    article_published --> article_archived : 过期/不再相关
    article_archived --> article_published : 重新发布
    article_archived --> [*]
}

' ========================
' 审核状态图
' ========================
state "审核流程状态" as audit_container {
    state "已创建 (Created)" as audit_created
    state "进行中 (In Progress)" as audit_in_progress
    state "需更多信息 (Need Info)" as audit_need_info
    state "已完成 (Completed)" as audit_completed
    
    [*] --> audit_created
    audit_created --> audit_in_progress : 分配审核人员
    audit_in_progress --> audit_need_info : 信息不足
    audit_need_info --> audit_in_progress : 信息补充完成
    audit_in_progress --> audit_completed : 审核决定
    audit_completed --> [*]
}

@enduml 